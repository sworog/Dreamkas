<% var templates = {
    select_priceRoundings: require('tpl!blocks/select/select_priceRoundings/select_priceRoundings.html'),
    select_vat: require('tpl!blocks/select/select_vat/select_vat.html')
} %>

<h1><%- model.id ? 'Редактирование товара' : 'Добавление товара' %></h1>
<fieldset class="form__fieldset">
    <div class="form__field form__feld_inline productForm__productTypeRadio">
        <input id="product-form-unit-radio"
                type="radio"
                name="type"
                value="unit"
                class="productForm__hiddenInput"
                <%- (model.get('type') == 'unit')?'checked':'' %> >
        <label for="product-form-unit-radio">Штучный</label>

        <input id="product-form-weight-radio"
                type="radio"
                name="type"
                value="weight"
                class="productForm__hiddenInput"
                <%- (model.get('type') == 'weight')?'checked':'' %> >
        <label for="product-form-weight-radio">Весовой</label>
    </div>

    <% if (model.get('sku')) { %>
        <div class="form__field form__field_inline">
            <label class="form__label">Код товара</label>
            <div name="sku"><%- model.get('sku') %></div>
        </div>
    <% } %>
    <div class="form__field form__field_inline">
        <label class="form__label">Наименование</label>
        <input value="<%- model.get('name') %>" class="inputText" type="text" name="name"/>
    </div>
    <div class="form__field form__field_inline">
        <label class="form__label">Единица измерения</label>
        <div name="units"><%- LH.units(model.get('units'), 'capitalFull') %></div>
    </div>
    <div class="form__field form__field_inline">
        <label class="form__label">НДС</label>
        <select class="select select_vat" name="vat">
            <%= templates.select_vat({
                selected: model.get('vat')
            }) %>
        </select>
    </div>

    <div class="form__field form__field_inline">
        <label class="form__label">Штрихкод</label>
        <input value="<%- model.get('barcode') %>" class="inputText" type="text" name="barcode"/>
    </div>
    <div class="form__field form__field_inline">
        <label class="form__label">Страна производства</label>
        <input value="<%- model.get('vendorCountry') %>" class="inputText" type="text" name="vendorCountry"/>
    </div>
    <div class="form__field form__field_inline">
        <label class="form__label">Производитель</label>
        <input value="<%- model.get('vendor') %>" class="inputText" type="text" name="vendor"/>
    </div>

    <!-- Advanced fields -->
    <div class="productForm__productTypePropertiesFields">

    </div>

    <div class="form__field form__field_inline">
        <label class="form__label">Цена закупки</label>
        <input style="width: 150px;" value="<%- model.get('purchasePrice') ? LH.formatMoney(model.get('purchasePrice')) : '' %>" class="inputText" type="text" name="purchasePrice"/>
        <span class="inputText__postfix">руб.</span>
    </div>
    <div class="form__field form__field_inline productForm__retailMarkupField">
        <label class="form__label">Диапазон наценки</label>
        <span name="retailMarkup" class="retailMarkup productForm__linkedInput <%- model.get('retailPricePreference') == 'retailMarkup' ? '' : 'productForm__hiddenInput' %>">
            <input
                   style="width: 100px;"
                   value="<%- model.get('retailMarkupMin') %>"
                   class="inputText"
                   type="text"
                   name="retailMarkupMin"/>
            -
            <input
                    style="width: 100px;"
                    value="<%- model.get('retailMarkupMax') %>"
                    class="inputText"
                    type="text"
                    name="retailMarkupMax"/>
        </span>
        <span class="productForm__inputLink">
            <span class="productForm__inputLinkText" name="retailMarkupHint"></span>
        </span>
        <span class="inputText__postfix">%</span>
        <span class="productForm__disableHint">Введите цену закупки</span>
    </div>
    <div class="form__field form__field_inline productForm__retailPriceField">
        <label class="form__label">Диапазон цены продажи</label>
        <span name="retailPrice" class="retailPrice productForm__linkedInput <%- model.get('retailPricePreference') == 'retailMarkup' ? 'productForm__hiddenInput' : '' %>">
            <input
                    style="width: 100px;"
                    value="<%- model.get('retailPriceMin') ? LH.formatMoney(model.get('retailPriceMin')) : '' %>"
                    class="inputText"
                    type="text"
                    name="retailPriceMin"/>
            -
            <input
                    style="width: 100px;"
                    value="<%- model.get('retailPriceMax') ? LH.formatMoney(model.get('retailPriceMax')) : '' %>"
                    class="inputText"
                    type="text"
                    name="retailPriceMax"/>
        </span>
        <span class="productForm__inputLink">
            <span class="productForm__inputLinkText" name="retailPriceHint"></span>
        </span>
        <span class="inputText__postfix">руб.</span>
        <span class="productForm__disableHint">Введите цену закупки</span>
    </div>
    <div class="form__field form__field_inline">
        <label class="form__label">Округление</label>
        <select class="select select_priceRoundings" name="rounding.name">
            <%= templates.select_priceRoundings({
                selected: model.get('rounding').name || subCategoryModel.get('rounding').name || 'nearest1'
            }) %>
        </select>
    </div>
    <input type="hidden" value="<%- model.get('retailPricePreference') %>" name="retailPricePreference" />
</fieldset>
<div class="form__controls">
    <span lh-button class="button">
        <%- model.id ? 'Сохранить' : 'Добавить' %>
        <input type="submit"/>
    </span>
</div>
